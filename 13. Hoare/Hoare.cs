namespace Software_Design._13._Hoare;

public class Hoare
{
    public static int Max(int a, int b)
    {
        return a >= b ? a : b;
    }

    public static int Abs(int x)
    {
        return x >= 0 ? x : x * -1;
    }

    // {P: |a| >= |b|} Main(a, b) {Q: res = |a|}
    /**
     * Доказательство:
     * 1. Предположим, что предусловие истинно, то есть |a| >= |b|
     * 1.1. Это означает, что абсолютное значение a больше или равно абсолютному значению b
     * 1.2. Независимо от знаков a и b, их абсолютные значения сравниваются, и |a| является наибольшим
     *
     * 2. Применим функцию Main к a и b
     * 2.1. Функция Main вызывает Max(Abs(a), Abs(b))
     * 2.2. Рассмотрим все возможные случаи для a и b
     *
     * 2.3. Случай 1: a >= 0 и b >= 0
     * 2.3.1. Abs(a) возвращает a (так как a >= 0)
     * 2.3.2. Abs(b) возвращает b (так как b >= 0)
     * 2.3.3. По предусловию |a| >= |b|, то есть a >= b
     * 2.3.4. Max(a, b) вернёт a
     * 2.3.5. Результат: res = a = |a|
     * 2.3.6. Постусловие выполнено: res = |a| ✓
     *
     * 2.4. Случай 2: a >= 0 и b < 0
     * 2.4.1. Abs(a) возвращает a (так как a >= 0)
     * 2.4.2. Abs(b) возвращает b * -1 (так как b < 0)
     * 2.4.3. По предусловию |a| >= |b|, то есть a >= b * -1
     * 2.4.4. Max(a, b * -1) вернёт a (так как a >= b * -1)
     * 2.4.5. Результат: res = a = |a|
     * 2.4.6. Постусловие выполнено: res = |a| ✓
     *
     * 2.5. Случай 3: a < 0 и b >= 0
     * 2.5.1. Abs(a) возвращает a * -1 (так как a < 0)
     * 2.5.2. Abs(b) возвращает b (так как b >= 0)
     * 2.5.3. По предусловию |a| >= |b|, то есть a * -1 >= b
     * 2.5.4. Max(a * -1, b) вернёт a * -1 (так как a * -1 >= b)
     * 2.5.5. Результат: res = a * -1 = |a|
     * 2.5.6. Постусловие выполнено: res = |a| ✓
     *
     * 2.6. Случай 4: a < 0 и b < 0
     * 2.6.1. Abs(a) возвращает a * -1 (так как a < 0)
     * 2.6.2. Abs(b) возвращает b * -1 (так как b < 0)
     * 2.6.3. По предусловию |a| >= |b|, то есть a * -1 >= b * -1
     * 2.6.4. Max(a * -1, b * -1) вернёт a * -1 (так как a * -1 >= b * -1)
     * 2.6.5. Результат: res = a * -1 = |a|
     * 2.6.6. Постусловие выполнено: res = |a| ✓
     *
     * 3. Заключение:
     * 3.1. Во всех четырёх возможных случаях функция Main возвращает |a|
     * 3.2. Предусловие |a| >= |b| гарантирует, что Max(Abs(a), Abs(b)) всегда вернёт Abs(a)
     * 3.3. Постусловие res = |a| выполняется во всех случаях
     * 3.4. Тройка Хоара {P: |a| >= |b|} Main(a, b) {Q: res = |a|} верна
     */
    public static int Main(int a, int b)
    {
        return Max(Abs(a), Abs(b));
    }
}